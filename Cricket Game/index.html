<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bat Ball Stump Game</title>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Bat Ball Stump Game</h1>
    <button class="choice-button" onclick="
    const userChoiceMsg = 'you have choosen bat';
    //console.log('You have choosen bat');
   let computerChoice= getComputerChoice();
    let resultMsg = getResult('Bat', computerChoice);

   displayScore('Bat', computerChoice, resultMsg);"

    ><img src="images/bat.png" alt="Bat" class="choice-image"></button>


    <button  class="choice-button" onclick="
    userChoiceMsg = 'you have choosen ball';
    //console.log('You have choosen ball');
    computerChoice=getComputerChoice();

    resultMsg = getResult('Ball', computerChoice);
    
   displayScore('Ball', computerChoice, resultMsg);"
><img src="images/ball.png" alt="Ball" class="choice-image"></button>


    <button class="choice-button"  onclick="
    userChoiceMsg = 'you have choosen stump';
    //console.log('You have choosen ball');
    computerChoice=getComputerChoice();
   resultMsg = getResult('Stump', computerChoice);
    
   displayScore('Stump', computerChoice, resultMsg);"
><img src="images/stump.png" alt="stump" class="choice-image"></button>
<h3 id="user-move"></h3>
<h3 id="computer-move"></h3>
<h3 id="result"></h3>
<h3 id="score"></h3>
<button onclick="localStorage.clear();
resetScore();
">Reset</button>
    <script>
let score;
let scoreStr =localStorage.getItem('score');
resetScore(scoreStr);
function resetScore(scoreStr){
     score = scoreStr?JSON.parse(scoreStr):
        {
            win: 0,
            lost: 0,
            tie: 0,
           
        };
        score.displayResult=function(){
                return `Wins: ${score.win}, Losses: ${score.lost}, Ties: ${score.tie}`;
            };
            displayScore();

}

        // Additional JavaScript can be added here if needed
    
    

    function getComputerChoice() {
        let randomNumber = Math.random()*3;
        let computerChoice;
    if(randomNumber >0 && randomNumber<=1){
        computerChoice = 'Bat';
        console.log('Computer chose: ' + computerChoice);
    } else if(randomNumber > 1 && randomNumber <= 2){
        computerChoice = 'Ball';
        console.log('Computer chose: ' + computerChoice);
    } else {
        computerChoice = 'Stump';
        console.log('Computer chose: ' + computerChoice);
    }
        return computerChoice;
    }


    function getResult(userChoice, computerChoice) {
        let resultMsg;
    if(computerChoice === userChoice){
        resultMsg='It\'s a tie';
        score.tie++;
    } else if(computerChoice === 'Bat' && userChoice === 'Ball' || 
              computerChoice === 'Ball' && userChoice === 'Stump' || 
              computerChoice === 'Stump' && userChoice === 'Bat') {
        resultMsg='You win';
        score.win++;
    } else {
        resultMsg='You lose';
        score.lost++;
    }
        return resultMsg;
    }

    function displayScore(userChoiceMsg, computerChoice, resultMsg) {

        localStorage.setItem('score', JSON.stringify(score));
        document.querySelector('#user-move').innerText = userChoiceMsg !=undefined? userChoiceMsg : ' ';
        document.querySelector('#computer-move').innerText =computerChoice !=undefined? `Computer chose: ${computerChoice}` : ' ' ;
        document.querySelector('#result').innerText = resultMsg!=undefined? `Result: ${resultMsg}` : ' ';
        document.querySelector('#score').innerText ="Score:"+ score.displayResult();



        // alert(`You chose:${userChoiceMsg}\nComputer chose: ${computerChoice}\nResult: ${resultMsg}

        //  ${score.displayResult()}`);
    }


    </script>
</body>
</html>